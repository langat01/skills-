<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SkillForge - Learn, Create, Succeed</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f9fafc;
      margin: 0;
      padding: 0;
    }
    header {
      background: #4361ee;
      color: #fff;
      padding: 15px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 { margin: 0; }
    nav { display: flex; gap: 15px; }
    nav a {
      color: #fff; text-decoration: none; font-weight: bold;
    }
    .auth-buttons button {
      margin-left: 10px;
      padding: 8px 15px;
      border: none;
      background: #fff;
      color: #4361ee;
      border-radius: 5px;
      cursor: pointer;
    }
    .notification {
      display: none;
      position: fixed;
      top: 20px; right: 20px;
      background: #4caf50;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      z-index: 1000;
    }
    .notification.error { background: #e74c3c; }
    .container { padding: 20px; }
    .search-bar {
      display: flex;
      max-width: 600px;
      margin: 20px auto;
    }
    .search-bar input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 5px 0 0 5px;
    }
    .search-bar button {
      padding: 10px 15px;
      border: none;
      background: #4361ee;
      color: #fff;
      border-radius: 0 5px 5px 0;
      cursor: pointer;
    }
    .tabs {
      display: flex;
      justify-content: center;
      margin: 30px 0;
      border-bottom: 1px solid #ccc;
    }
    .tab {
      padding: 10px 20px;
      cursor: pointer;
    }
    .tab.active { border-bottom: 3px solid #4361ee; font-weight: bold; }
    .tab-content { display: none; padding: 20px; }
    .tab-content.active { display: block; }
    .course-card {
      background: #fff;
      padding: 15px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,.1);
    }
    .course-badge {
      background: #00b894;
      color: #fff;
      padding: 3px 8px;
      border-radius: 5px;
      font-size: 12px;
      display: inline-block;
    }
    .progress-bar {
      height: 6px;
      background: #ddd;
      border-radius: 3px;
      margin: 10px 0;
    }
    .progress-fill {
      height: 100%;
      background: #4361ee;
      border-radius: 3px;
    }
    /* Simple modals */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      justify-content: center; align-items: center;
      z-index: 1000;
    }
    .modal-content {
      background: #fff;
      padding: 20px;
      width: 300px;
      border-radius: 8px;
      position: relative;
    }
    .close {
      position: absolute; top: 10px; right: 10px;
      cursor: pointer;
    }
    input, select {
      width: 100%; padding: 8px; margin: 10px 0;
      border: 1px solid #ddd; border-radius: 5px;
    }
    .btn {
      display: inline-block;
      padding: 8px 12px;
      background: #4361ee;
      color: #fff; border: none;
      border-radius: 5px;
      cursor: pointer;
      text-align: center;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <header>
    <h1>SkillForge</h1>
    <nav id="main-nav">
      <a href="#">Home</a>
      <a href="#">Courses</a>
      <a href="#">Community</a>
    </nav>
    <div class="auth-buttons">
      <button id="login-btn">Login</button>
      <button id="signup-btn">Sign Up</button>
    </div>
    <div id="user-menu" class="hidden">
      <span id="user-avatar"></span>
      <button id="logout-btn">Logout</button>
    </div>
  </header>

  <div class="notification" id="notification"></div>

  <div class="container">
    <div class="search-bar">
      <input type="text" id="search-input" placeholder="Search courses...">
      <button id="search-btn">Search</button>
    </div>

    <div class="tabs">
      <div class="tab active" data-tab="courses">Courses</div>
      <div class="tab" data-tab="projects">Projects</div>
      <div class="tab" data-tab="tutorials">Tutorials</div>
      <div class="tab" data-tab="articles">Articles</div>
      <div class="tab" data-tab="dashboard-section">Dashboard</div>
    </div>

    <div id="courses" class="tab-content active">
      <div id="courses-container"></div>
    </div>
    <div id="projects" class="tab-content">
      <div id="projects-container"></div>
    </div>
    <div id="tutorials" class="tab-content">
      <div id="tutorials-container"></div>
    </div>
    <div id="articles" class="tab-content">
      <div id="articles-container"></div>
    </div>
    <div id="dashboard-section" class="tab-content hidden">
      <h2>Welcome <span id="welcome-user"></span></h2>
      <div id="continue-learning-container"></div>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="login-modal" class="modal">
    <div class="modal-content">
      <span id="close-login" class="close">&times;</span>
      <h3>Login</h3>
      <input id="login-email" type="email" placeholder="Email">
      <input id="login-password" type="password" placeholder="Password">
      <button id="login-submit" class="btn"><span id="login-text">Login</span><span id="login-loader" class="hidden">Loading...</span></button>
      <p>Donâ€™t have an account? <a href="#" id="switch-to-signup">Sign up</a></p>
    </div>
  </div>

  <!-- Signup Modal -->
  <div id="signup-modal" class="modal">
    <div class="modal-content">
      <span id="close-signup" class="close">&times;</span>
      <h3>Sign Up</h3>
      <input id="signup-name" type="text" placeholder="Full Name">
      <input id="signup-email" type="email" placeholder="Email">
      <input id="signup-password" type="password" placeholder="Password">
      <input id="signup-confirm-password" type="password" placeholder="Confirm Password">
      <label><input type="checkbox" id="terms-agree"> I agree to terms</label>
      <button id="signup-submit" class="btn"><span id="signup-text">Sign Up</span><span id="signup-loader" class="hidden">Loading...</span></button>
      <p>Already have an account? <a href="#" id="switch-to-login">Login</a></p>
    </div>
  </div>

  <!-- Enrollment Modal -->
  <div id="enroll-modal" class="modal">
    <div class="modal-content">
      <span id="close-enroll" class="close">&times;</span>
      <h3 id="enroll-course-title">Enroll in Course</h3>
      <div id="enroll-free" class="">
        <button id="enroll-free-btn" class="btn">Enroll for Free</button>
      </div>
      <div id="enroll-paid" class="hidden">
        <p>Price: <span id="course-price"></span></p>
        <select id="payment-method">
          <option value="mpesa">M-Pesa</option>
          <option value="card">Credit/Debit Card</option>
        </select>
        <div id="card-payment" class="hidden">
          <input type="text" placeholder="Card Number">
          <input type="text" placeholder="Expiry Date">
          <input type="text" placeholder="CVV">
        </div>
        <button id="enroll-paid-btn" class="btn">Pay & Enroll</button>
      </div>
    </div>
  </div>

  <!-- ==================== BACKEND + FRONTEND JS ==================== -->
  <script>
    // Simulated database in localStorage
    const initializeDatabase = () => {
      if (!localStorage.getItem("users")) localStorage.setItem("users", JSON.stringify([]));
      if (!localStorage.getItem("courses")) {
        localStorage.setItem("courses", JSON.stringify([
          {id: 1, title: "Intro to Python", free: true, price: 0},
          {id: 2, title: "Web Development Basics", free: false, price: 2000}
        ]));
      }
    };

    // Show notification
    const showNotification = (msg, error=false) => {
      const note = document.getElementById("notification");
      note.textContent = msg;
      note.classList.toggle("error", error);
      note.style.display = "block";
      setTimeout(() => note.style.display="none", 3000);
    };

    // Switch tabs
    document.querySelectorAll(".tab").forEach(tab=>{
      tab.addEventListener("click", ()=>{
        document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
        document.querySelectorAll(".tab-content").forEach(c=>c.classList.remove("active"));
        tab.classList.add("active");
        document.getElementById(tab.dataset.tab).classList.add("active");
      });
    });

    // Load courses
    const loadCourses = () => {
      const courses = JSON.parse(localStorage.getItem("courses"));
      const container = document.getElementById("courses-container");
      container.innerHTML = "";
      courses.forEach(c=>{
        const div = document.createElement("div");
        div.className="course-card";
        div.innerHTML = \`
          <h3>\${c.title}</h3>
          <span class="course-badge">\${c.free?"Free":"Paid"}</span>
          <button class="btn enroll-btn" data-id="\${c.id}">Enroll</button>
        \`;
        container.appendChild(div);
      });
    };

    // Enrollment modal logic
    document.addEventListener("click",(e)=>{
      if(e.target.classList.contains("enroll-btn")){
        const courses = JSON.parse(localStorage.getItem("courses"));
        const course = courses.find(c=>c.id==e.target.dataset.id);
        document.getElementById("enroll-course-title").textContent = "Enroll in "+course.title;
        if(course.free){
          document.getElementById("enroll-free").classList.remove("hidden");
          document.getElementById("enroll-paid").classList.add("hidden");
        } else {
          document.getElementById("enroll-free").classList.add("hidden");
          document.getElementById("enroll-paid").classList.remove("hidden");
          document.getElementById("course-price").textContent = "KES "+course.price;
        }
        document.getElementById("enroll-modal").style.display="flex";
      }
    });

    // Close modals
    document.querySelectorAll(".close").forEach(c=>{
      c.onclick = ()=>c.parentElement.parentElement.style.display="none";
    });

    // Init
    initializeDatabase();
    loadCourses();
  </script>
</body>
</html>
